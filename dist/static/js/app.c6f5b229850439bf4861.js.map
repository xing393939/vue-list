{"version":3,"sources":["webpack:///static/js/app.c6f5b229850439bf4861.js","webpack:///./src/main.js","webpack:///App.vue","webpack:///vue-list.vue","webpack:///./src/App.vue","webpack:///./src/components/vue-list.vue","webpack:///./src/components/vue-list.vue?74ea","webpack:///./src/App.vue?cd7e"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_vue","_vue2","_App","_App2","el","template","components","App","Object","defineProperty","value","_vueList","_vueList2","window","COUNT","name","data","list","created","i","this","push","title","methods","setData","vueList","props","type","Array","required","twoWays","height","Number","canScroll","Boolean","dispatchData","Function","lastScrollTop","distance","lineTopHeight","lineBottomHeight","canLoadmore","previewList","displayCount","mounted","initData","handleScroll","_rowsInWindow","Math","ceil","$el","offsetHeight","_above","_below","_max","_this","_scrollTop","scrollTop","_height","querySelectorAll","_contentHeight","floor","abs","to","length","loadmore","from","_from","parseInt","_to","resetPreviewList","$nextTick","_this2","setTimeout","__vue_exports__","__vue_options__","__vue_template__","options","render","staticRenderFns","_vm","_h","$createElement","_c","_self","staticClass","on","scroll","style","_v","_l","item","_s","attrs","id","update:list","$event"],"mappings":"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","file":"static/js/app.c6f5b229850439bf4861.js","sourcesContent":["webpackJsonp([1,0],[\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _vue = __webpack_require__(3);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _App = __webpack_require__(6);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tnew _vue2.default({\n\t  el: '#app',\n\t  template: '<App/>',\n\t  components: { App: _App2.default }\n\t});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 3 */,\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _vueList = __webpack_require__(7);\n\t\n\tvar _vueList2 = _interopRequireDefault(_vueList);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\twindow.COUNT = 1;\n\t\n\texports.default = {\n\t  name: 'app',\n\t  data: function data() {\n\t    return {\n\t      list: [],\n\t      data: {}\n\t    };\n\t  },\n\t  created: function created() {\n\t    for (var i = 0; i < 200; i++) {\n\t      this.list.push({\n\t        title: 'item ' + COUNT++\n\t      });\n\t    }\n\t  },\n\t\n\t  methods: {\n\t    setData: function setData(data) {\n\t      this.data = data;\n\t    }\n\t  },\n\t  components: {\n\t    vueList: _vueList2.default\n\t  }\n\t};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = {\n\t  name: 'vue-list',\n\t  props: {\n\t    list: {\n\t      type: Array,\n\t      required: true,\n\t      default: [],\n\t      twoWays: true\n\t    },\n\t    height: {\n\t      type: Number,\n\t      default: 44\n\t    },\n\t    canScroll: {\n\t      type: Boolean,\n\t      default: true\n\t    },\n\t    dispatchData: {\n\t      type: Function\n\t    }\n\t  },\n\t  data: function data() {\n\t    return {\n\t      lastScrollTop: null,\n\t      distance: 44,\n\t      lineTopHeight: 0,\n\t      lineBottomHeight: 0,\n\t      canLoadmore: true,\n\t      previewList: [],\n\t      displayCount: 0\n\t    };\n\t  },\n\t  mounted: function mounted() {\n\t    this.initData();\n\t    this.handleScroll();\n\t  },\n\t\n\t  methods: {\n\t    initData: function initData() {\n\t      this._rowsInWindow = Math.ceil(this.$el.offsetHeight / this.height), this._above = this._rowsInWindow * 2, this._below = this._rowsInWindow, this._max = this._rowsInWindow * this.height;\n\t    },\n\t    handleScroll: function handleScroll() {\n\t      var _this = this;\n\t\n\t      var _scrollTop = this.$el.scrollTop,\n\t          _height = this.$el.querySelectorAll('ul')[0].offsetHeight,\n\t          _contentHeight = this.$el.offsetHeight;\n\t\n\t      if (_scrollTop / this.height - Math.floor(_scrollTop / this.height) > 0.5) {\n\t        this.displayCount = Math.ceil(_scrollTop / this.height);\n\t      } else {\n\t        this.displayCount = Math.floor(_scrollTop / this.height);\n\t      }\n\t\n\t      if (this.lastScrollTop === null || Math.abs(_scrollTop - this.lastScrollTop) > this._max) {\n\t        this.lastScrollTop = _scrollTop;\n\t      } else {\n\t        if (this.to === this.list.length && _height - _scrollTop - _contentHeight < this.distance) {\n\t          this.canScroll && this.loadmore(this.from, this.to);\n\t        }\n\t        return;\n\t      }\n\t\n\t      var _from = parseInt(_scrollTop / this.height) - this._above;\n\t      if (_from < 0) {\n\t        _from = 0;\n\t      }\n\t      var _to = _from + this._above + this._below + this._rowsInWindow;\n\t      if (_to > this.list.length) {\n\t        _to = this.list.length;\n\t      }\n\t      this.from = _from;\n\t      this.to = _to;\n\t\n\t      this.lineTopHeight = _from * this.height;\n\t      this.lineBottomHeight = (this.list.length - _to) * this.height;\n\t\n\t      if (typeof this.dispatchData === 'function') {\n\t        this.dispatchData(this);\n\t      }\n\t\n\t      this.resetPreviewList(_from, _to);\n\t\n\t      this.$nextTick(function () {\n\t        var _scrollTop = _this.$el.scrollTop,\n\t            _height = _this.$el.querySelectorAll('ul')[0].offsetHeight,\n\t            _contentHeight = _this.$el.offsetHeight;\n\t\n\t        if (_to === _this.list.length && _height - _scrollTop - _contentHeight < 0) {\n\t          _this.canScroll && _this.loadmore(_this.from, _this.to);\n\t        }\n\t      });\n\t    },\n\t    loadmore: function loadmore(from, to) {\n\t      var _this2 = this;\n\t\n\t      if (!this.canLoadmore) return;\n\t      this.canLoadmore = false;\n\t\n\t      setTimeout(function () {\n\t        for (var i = 0; i < 200; i++) {\n\t          _this2.list.push({\n\t            title: 'item ' + COUNT++\n\t          });\n\t        }\n\t        var _from = from,\n\t            _to = to + _this2._below;\n\t        _this2.resetPreviewList(_from, _to);\n\t        _this2.lineBottomHeight = (_this2.list.length - _to) * _this2.height;\n\t        _this2.handleScroll();\n\t\n\t        _this2.canLoadmore = true;\n\t      }, 2000);\n\t    },\n\t    resetPreviewList: function resetPreviewList(from, to) {\n\t      this.previewList = [];\n\t      for (; from < to; from++) {\n\t        this.previewList.push(this.list[from]);\n\t      }\n\t    }\n\t  },\n\t  components: {}\n\t};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(2)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(4)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(9)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(1)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(5)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(8)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    staticClass: \"vue-list\",\n\t    on: {\n\t      \"scroll\": _vm.handleScroll\n\t    }\n\t  }, [_c('ul', [_c('li', {\n\t    staticClass: \"line-top\",\n\t    style: ({\n\t      height: _vm.lineTopHeight + 'px'\n\t    })\n\t  }), _vm._v(\" \"), _vm._l((_vm.previewList), function(item) {\n\t    return _c('li', [_vm._v(_vm._s(item.title))])\n\t  }), _vm._v(\" \"), _c('li', {\n\t    staticClass: \"line-bottom\",\n\t    style: ({\n\t      height: _vm.lineBottomHeight + 'px'\n\t    })\n\t  })], 2), _vm._v(\" \"), _c('div', {\n\t    staticClass: \"load-more-gif\"\n\t  }, [_vm._v(\"loading...\")])])\n\t},staticRenderFns: []}\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"app\"\n\t    }\n\t  }, [_c('div', {\n\t    staticClass: \"content\"\n\t  }, [_c('div', {\n\t    staticClass: \"preview\"\n\t  }, [_c('div', {\n\t    staticClass: \"setting\"\n\t  }, [_c('p', [_vm._v(\"Total items: \"), _c('span', [_vm._v(_vm._s(_vm.list.length))])]), _vm._v(\" \"), _c('p', [_vm._v(\"Item height: \"), _c('span', [_vm._v(_vm._s(_vm.data.height) + \"px\")])]), _vm._v(\" \"), _c('p', [_vm._v(\"Above items: \"), _c('span', [_vm._v(_vm._s(_vm.data._above))])]), _vm._v(\" \"), _c('p', [_vm._v(\"Below items: \"), _c('span', [_vm._v(_vm._s(_vm.data._below))])]), _vm._v(\" \"), _c('p', [_vm._v(\"Rows in window: \"), _c('span', [_vm._v(_vm._s(_vm.data.displayCount + 1) + \"-\" + _vm._s((_vm.data.displayCount + _vm.data._rowsInWindow) > _vm.list.length ? _vm.list.length : (_vm.data.displayCount + _vm.data._rowsInWindow)))])]), _vm._v(\" \"), _c('p', [_c('span', [_vm._v(_vm._s(_vm.data._rowsInWindow * 4))]), _vm._v(\" items from \"), _c('span', [_vm._v(_vm._s(_vm.data.from))]), _vm._v(\" to \"), _c('span', [_vm._v(_vm._s(_vm.data.to))])]), _vm._v(\" \"), _c('p', [_vm._v(\"Top height: \"), _c('span', [_vm._v(_vm._s(_vm.data.lineTopHeight) + \"px\")])]), _vm._v(\" \"), _c('p', [_vm._v(\"Bottom Height: \"), _c('span', [_vm._v(_vm._s(_vm.data.lineBottomHeight) + \"px\")])]), _vm._v(\" \"), _c('p', [_vm._v(\"Will load more items: \"), _c('span', [_vm._v(_vm._s(!_vm.data.canLoadmore))])])]), _vm._v(\" \"), _c('div', {\n\t    staticClass: \"preview-content\"\n\t  }, [_c('vue-list', {\n\t    attrs: {\n\t      \"list\": _vm.list,\n\t      \"dispatchData\": _vm.setData\n\t    },\n\t    on: {\n\t      \"update:list\": function($event) {\n\t        _vm.list = $event\n\t      }\n\t    }\n\t  })], 1)])])])\n\t},staticRenderFns: []}\n\n/***/ })\n]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.c6f5b229850439bf4861.js","import Vue from 'vue'\r\nimport App from './App'\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  template: '<App/>',\r\n  components: { App }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","<template>\r\n  <div id=\"app\">\r\n\r\n    <div class=\"content\">\r\n      <div class=\"preview\">\r\n        <div class=\"setting\">\r\n          <p>Total items: <span>{{list.length}}</span></p>\r\n          <p>Item height: <span>{{data.height}}px</span></p>\r\n          <p>Above items: <span>{{data._above}}</span></p>\r\n          <p>Below items: <span>{{data._below}}</span></p>\r\n          <p>Rows in window: <span>{{data.displayCount + 1}}-{{(data.displayCount + data._rowsInWindow) > list.length ? list.length: (data.displayCount + data._rowsInWindow)}}</span></p>\r\n          <p><span>{{data._rowsInWindow * 4}}</span> items from <span>{{data.from}}</span> to <span>{{data.to}}</span></p>\r\n          <p>Top height: <span>{{data.lineTopHeight}}px</span></p>\r\n          <p>Bottom Height: <span>{{data.lineBottomHeight}}px</span></p>\r\n          <p>Will load more items: <span>{{!data.canLoadmore}}</span></p>\r\n        </div>\r\n        <div class=\"preview-content\">\r\n          <vue-list :list.sync='list' :dispatchData=\"setData\"></vue-list>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport vueList from 'components/vue-list';\r\n\r\nwindow.COUNT = 1;\r\n\r\nexport default {\r\n  name: 'app',\r\n  data() {\r\n    return {\r\n      list: [],\r\n      data: {}\r\n    }\r\n  },\r\n  created() {\r\n    for(var i = 0; i < 200; i++) {\r\n      this.list.push({\r\n        title: 'item ' + COUNT++\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    setData(data) {\r\n      this.data = data;\r\n    }\r\n  },\r\n  components: {\r\n    vueList\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\nhtml,body{\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n#app {\r\n  color: #2c3e50;\r\n  font-size: 48px;\r\n  .content{\r\n    width: 100%;\r\n    height: 650px;\r\n    &>div{\r\n\r\n    }\r\n    .preview{\r\n      .preview-content{\r\n        width: 100%;\r\n        height: 464px;\r\n\r\n        background: #fff;\r\n        overflow-y: scroll;\r\n      }\r\n    }\r\n    .setting{\r\n      p {display:inline;}\r\n      span{\r\n        color: #48B884;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// App.vue?f93f935c","<template lang=\"html\">\r\n  <div class=\"vue-list\" @scroll=\"handleScroll\">\r\n    <ul>\r\n      <li class=\"line-top\" :style=\"{height: lineTopHeight +'px'}\"></li>\r\n      <li v-for=\"item in previewList\">{{item.title}}</li>\r\n      <li class=\"line-bottom\" :style=\"{height: lineBottomHeight +'px'}\"></li>\r\n    </ul>\r\n    <div class=\"load-more-gif\">loading...</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'vue-list',\r\n  props: {\r\n    list: {\r\n      type: Array,\r\n      required: true,\r\n      default: [],\r\n      twoWays: true\r\n    },\r\n    height: {\r\n      type: Number,\r\n      default: 44\r\n    },\r\n    canScroll: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    dispatchData: {\r\n      type: Function\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      lastScrollTop: null,\r\n      distance: 44,\r\n      lineTopHeight: 0,\r\n      lineBottomHeight: 0,\r\n      canLoadmore: true,\r\n      previewList: [],\r\n      displayCount: 0\r\n    }\r\n  },\r\n  mounted () {\r\n    this.initData();\r\n    this.handleScroll();\r\n  },\r\n  methods: {\r\n    initData() {\r\n      // init all data\r\n      this._rowsInWindow = Math.ceil(this.$el.offsetHeight / this.height),\r\n      this._above = this._rowsInWindow * 2,\r\n      this._below = this._rowsInWindow,\r\n      this._max = this._rowsInWindow * this.height;\r\n    },\r\n    handleScroll() {\r\n      let _scrollTop = this.$el.scrollTop,\r\n          _height = this.$el.querySelectorAll('ul')[0].offsetHeight,\r\n          _contentHeight = this.$el.offsetHeight;\r\n\r\n      // Counts the number of rows on the current screen\r\n      if (_scrollTop / this.height - Math.floor(_scrollTop / this.height) > 0.5) {\r\n        this.displayCount = Math.ceil(_scrollTop / this.height);\r\n      } else {\r\n        this.displayCount = Math.floor(_scrollTop / this.height);\r\n      }\r\n\r\n      // if the maximum height is exceeded, reset the previewList\r\n      if (this.lastScrollTop === null || Math.abs(_scrollTop - this.lastScrollTop) > this._max) {\r\n          this.lastScrollTop = _scrollTop;\r\n      } else {\r\n          if (this.to === this.list.length && _height - _scrollTop - _contentHeight < this.distance) {\r\n            this.canScroll && this.loadmore(this.from, this.to);\r\n          }\r\n          return;\r\n      }\r\n\r\n      // get from and to count\r\n      let _from = parseInt(_scrollTop / this.height) - this._above;\r\n      if (_from < 0) {\r\n          _from = 0;\r\n      }\r\n      let _to = _from + this._above + this._below + this._rowsInWindow;\r\n      if (_to > this.list.length) {\r\n          _to = this.list.length;\r\n      }\r\n      this.from = _from;\r\n      this.to = _to;\r\n\r\n      // set top height and bottom height\r\n      this.lineTopHeight = _from * this.height;\r\n      this.lineBottomHeight = (this.list.length - _to) * this.height;\r\n\r\n      // dispatch data\r\n      if (typeof this.dispatchData === 'function') {\r\n        this.dispatchData(this)\r\n      }\r\n\r\n      this.resetPreviewList(_from, _to);\r\n\r\n      this.$nextTick(() => {\r\n        let _scrollTop = this.$el.scrollTop,\r\n            _height = this.$el.querySelectorAll('ul')[0].offsetHeight,\r\n            _contentHeight = this.$el.offsetHeight;\r\n\r\n        if (_to === this.list.length && _height - _scrollTop - _contentHeight < 0) {\r\n            this.canScroll && this.loadmore(this.from, this.to);\r\n        }\r\n      });\r\n    },\r\n    loadmore(from, to) {\r\n      if (!this.canLoadmore) return;\r\n      this.canLoadmore = false;\r\n      // fetch mock\r\n      setTimeout(() => {\r\n        for(var i = 0; i < 200; i++) {\r\n          this.list.push({\r\n            title: 'item ' + COUNT++\r\n          });\r\n        }\r\n        let _from = from, _to = to + this._below;\r\n        this.resetPreviewList(_from, _to);\r\n        this.lineBottomHeight = (this.list.length - _to) * this.height;\r\n        this.handleScroll();\r\n\r\n        this.canLoadmore = true;\r\n      }, 2000)\r\n    },\r\n    resetPreviewList(from, to) {\r\n      // reset previewList\r\n      this.previewList = [];\r\n      for (; from < to; from++) {\r\n          this.previewList.push(this.list[from])\r\n      }\r\n    }\r\n  },\r\n  components: {}\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.vue-list{\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  &::scroll-bar{\r\n    width: 0;\r\n  }\r\n  ul {\r\n    margin: 0;\r\n    padding: 0;\r\n    li{\r\n      text-decoration: none;\r\n      height: 44px;\r\n      font-size: 48px;\r\n      line-height: 3;\r\n      text-align: left;\r\n      padding-left: 15px;\r\n      border-bottom: 1px solid #ddd;\r\n      box-sizing: border-box;\r\n      background: #fff;\r\n      &.line-top, &.line-bottom{\r\n        border-bottom: 0;\r\n      }\r\n    }\r\n  }\r\n  .load-more-gif{\r\n    width: 100%;\r\n    height: 44px;\r\n    text-align: center;\r\n    line-height: 44px;\r\n    background: #fff;\r\n    border-top: none;\r\n    color: #48B884;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// vue-list.vue?01b9ddab","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!../node_modules/.1.0.1@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-cb79b504!less-loader?sourceMap!vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./App.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-cb79b504!vue-loader/lib/selector?type=template&index=0!./App.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 6\n// module chunks = 1","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!../../node_modules/.1.0.1@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-06abeb08!less-loader?sourceMap!vue-loader/lib/selector?type=styles&index=0!./vue-list.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./vue-list.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-06abeb08!vue-loader/lib/selector?type=template&index=0!./vue-list.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/vue-list.vue\n// module id = 7\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"vue-list\",\n    on: {\n      \"scroll\": _vm.handleScroll\n    }\n  }, [_c('ul', [_c('li', {\n    staticClass: \"line-top\",\n    style: ({\n      height: _vm.lineTopHeight + 'px'\n    })\n  }), _vm._v(\" \"), _vm._l((_vm.previewList), function(item) {\n    return _c('li', [_vm._v(_vm._s(item.title))])\n  }), _vm._v(\" \"), _c('li', {\n    staticClass: \"line-bottom\",\n    style: ({\n      height: _vm.lineBottomHeight + 'px'\n    })\n  })], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"load-more-gif\"\n  }, [_vm._v(\"loading...\")])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.9.9.5@vue-loader/lib/template-compiler.js?id=data-v-06abeb08!./~/.9.9.5@vue-loader/lib/selector.js?type=template&index=0!./src/components/vue-list.vue\n// module id = 8\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('div', {\n    staticClass: \"content\"\n  }, [_c('div', {\n    staticClass: \"preview\"\n  }, [_c('div', {\n    staticClass: \"setting\"\n  }, [_c('p', [_vm._v(\"Total items: \"), _c('span', [_vm._v(_vm._s(_vm.list.length))])]), _vm._v(\" \"), _c('p', [_vm._v(\"Item height: \"), _c('span', [_vm._v(_vm._s(_vm.data.height) + \"px\")])]), _vm._v(\" \"), _c('p', [_vm._v(\"Above items: \"), _c('span', [_vm._v(_vm._s(_vm.data._above))])]), _vm._v(\" \"), _c('p', [_vm._v(\"Below items: \"), _c('span', [_vm._v(_vm._s(_vm.data._below))])]), _vm._v(\" \"), _c('p', [_vm._v(\"Rows in window: \"), _c('span', [_vm._v(_vm._s(_vm.data.displayCount + 1) + \"-\" + _vm._s((_vm.data.displayCount + _vm.data._rowsInWindow) > _vm.list.length ? _vm.list.length : (_vm.data.displayCount + _vm.data._rowsInWindow)))])]), _vm._v(\" \"), _c('p', [_c('span', [_vm._v(_vm._s(_vm.data._rowsInWindow * 4))]), _vm._v(\" items from \"), _c('span', [_vm._v(_vm._s(_vm.data.from))]), _vm._v(\" to \"), _c('span', [_vm._v(_vm._s(_vm.data.to))])]), _vm._v(\" \"), _c('p', [_vm._v(\"Top height: \"), _c('span', [_vm._v(_vm._s(_vm.data.lineTopHeight) + \"px\")])]), _vm._v(\" \"), _c('p', [_vm._v(\"Bottom Height: \"), _c('span', [_vm._v(_vm._s(_vm.data.lineBottomHeight) + \"px\")])]), _vm._v(\" \"), _c('p', [_vm._v(\"Will load more items: \"), _c('span', [_vm._v(_vm._s(!_vm.data.canLoadmore))])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"preview-content\"\n  }, [_c('vue-list', {\n    attrs: {\n      \"list\": _vm.list,\n      \"dispatchData\": _vm.setData\n    },\n    on: {\n      \"update:list\": function($event) {\n        _vm.list = $event\n      }\n    }\n  })], 1)])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.9.9.5@vue-loader/lib/template-compiler.js?id=data-v-cb79b504!./~/.9.9.5@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 9\n// module chunks = 1"],"sourceRoot":""}